!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.visualizer=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var getUserMedia=require("get-user-media-promise"),raf=require("raf"),vizRadialArcs=require("./lib/vizRadialArcs"),vizRadialBars=require("./lib/vizRadialBars"),vizFlyout=require("./lib/vizFlyout"),vizSunburst=require("./lib/vizSunburst"),vizBoxes=require("./lib/VizBoxes"),vizSpikes=require("./lib/vizSpikes"),vizImage=require("./lib/vizImage");module.exports=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},parent=options.parent?document.querySelector(options.parent):window,cv=document.createElement("canvas");options.parent?parent.appendChild(cv):(cv.style.position="absolute",cv.style.left="0",cv.style.top="0",document.body.appendChild(cv));var ctx=cv.getContext("2d"),image=options.image,visualizers=[],currentViz=0,fftSize=256,bandCount=Math.round(fftSize/3),analyser=void 0,spectrum=void 0,lastVolumes=[],rotateAmount=2*Math.PI/bandCount,_getMediaStream=function(callback){return options.stream?setTimeout(function(){callback(null,options.stream)},0):void getUserMedia({video:!1,audio:!0}).then(function(stream){callback(null,stream)}).catch(function(e){callback(e)})},_init=function(stream){var audioCtx=new(window.AudioContext||window.webkitAudioContext),source=audioCtx.createMediaStreamSource(stream);analyser=audioCtx.createAnalyser(),analyser.smoothingTimeConstant=.2,analyser.fftSize=fftSize,spectrum=new Uint8Array(analyser.frequencyBinCount),source.connect(analyser);for(var i=0;i<bandCount;i++)lastVolumes.push(0);var options={cv:cv,ctx:ctx,bandCount:bandCount,rotateAmount:rotateAmount,lastVolumes:lastVolumes,image:image,fftSize:fftSize};visualizers.push(vizRadialArcs(options)),visualizers.push(vizRadialBars(options)),visualizers.push(vizFlyout(options)),visualizers.push(vizSunburst(options)),visualizers.push(vizBoxes(options)),visualizers.push(vizSpikes(options)),visualizers.push(vizImage(options)),_recalculateSizes(),_visualize(),window.onresize=function(){_recalculateSizes()}},addVisualizer=function(viz){var options={cv:cv,ctx:ctx,bandCount:bandCount,rotateAmount:rotateAmount,lastVolumes:lastVolumes,image:image,fftSize:fftSize};visualizers.push(viz(options))},showNextVisualization=function(){currentViz=(currentViz+1)%visualizers.length,_recalculateSizes()},showVisualization=function(idx){idx<0&&(idx=0),idx>=visualizers.length&&(idx=visualizers.length-1),currentViz=idx,_recalculateSizes()},vary=function(){visualizers[currentViz].vary&&visualizers[currentViz].vary()},_recalculateSizes=function(){var ratio=window.devicePixelRatio||1,w=parent.innerWidth||parent.clientWidth,h=parent.innerHeight||parent.clientHeight;cv.width=w*ratio,cv.height=h*ratio,cv.style.width=w+"px",cv.style.height=h+"px",visualizers[currentViz].resize()},_visualize=function _visualize(){if(analyser.getByteFrequencyData(spectrum),visualizers[currentViz].dampen===!0)for(var i=0;i<spectrum.length;i++)lastVolumes[i]>spectrum[i]&&(spectrum[i]=(spectrum[i]+lastVolumes[i])/2);visualizers[currentViz].draw(spectrum),raf(_visualize)};return _getMediaStream(function(err,stream){if(err)throw console.log(err),new Error("Unable to start visualization. Make sure you're using Chrome or Firefox with a microphone set up, and that you allow the page to access the microphone.");_init(stream)}),Object.freeze({addVisualizer:addVisualizer,showNextVisualization:showNextVisualization,showVisualization:showVisualization,vary:vary})}},{"./lib/VizBoxes":2,"./lib/vizFlyout":7,"./lib/vizImage":8,"./lib/vizRadialArcs":9,"./lib/vizRadialBars":10,"./lib/vizSpikes":11,"./lib/vizSunburst":12,"get-user-media-promise":13,raf:16}],2:[function(require,module,exports){"use strict";var colorMap=require("./big-color-map"),constrain=require("./constrain");module.exports=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ctx=options.ctx,cv=options.cv,dampen=!0,variant=0,variants=[[!1],[!0]],grow=void 0,longestSide=void 0,hueOffset=0,draw=function(spectrum){hueOffset+=.25,ctx.clearRect(0,0,cv.width,cv.height);for(var size=11,i=0,x=Math.floor((size-1)/2),y=x,loop=0,dx=0,dy=0,cw=cv.width/size,ch=cv.height/size;i<size*size;){switch(loop%4){case 0:dx=1,dy=0;break;case 1:dx=0,dy=1;break;case 2:dx=-1,dy=0;break;case 3:dx=0,dy=-1}for(var j=0;j<Math.floor(loop/2)+1;j++){var hue=Math.floor(360/(size*size)*i+hueOffset)%360,brightness=constrain(Math.floor(spectrum[i]/1.5),10,99);ctx.fillStyle=colorMap.bigColorMap[100*hue+brightness];var intensity=.9;grow&&(intensity=spectrum[i]/255/4+.65),ctx.fillRect(x*cw+cw/2*(1-intensity),y*ch+ch/2*(1-intensity),cw*intensity,ch*intensity),x+=dx,y+=dy,i++}loop++}ctx.setTransform(1,0,0,1,0,0)},resize=function(){longestSide=Math.max(cv.width,cv.height)},vary=function(){variant=(variant+1)%variants.length,grow=variants[variant][0]};return vary(),Object.freeze({dampen:dampen,vary:vary,resize:resize,draw:draw})}},{"./big-color-map":3,"./constrain":4}],3:[function(require,module,exports){"use strict";function generateColors(){for(var hue=0;hue<360;hue++)for(var brightness=0;brightness<100;brightness++){var color=HSVtoRGB(hue/360,1,brightness/100,!0,!1);bigColorMap.push(color);var color2=HSVtoRGB(hue/360,1,brightness/100,!1,!0);bigColorMap2.push(color2)}}var HSVtoRGB=require("./hsv-to-rgb"),bigColorMap=[],bigColorMap2=[];generateColors(),module.exports={bigColorMap:bigColorMap,bigColorMap2:bigColorMap2}},{"./hsv-to-rgb":6}],4:[function(require,module,exports){"use strict";module.exports=function(input,min,max){return input<min?input=min:input>max&&(input=max),input}},{}],5:[function(require,module,exports){"use strict";module.exports=function(image){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),grd=void 0;canvas.width=300,canvas.height=300,grd=ctx.createRadialGradient(150,150,0,150,150,150),grd.addColorStop(0,"rgba(255, 255, 255, 1.000)"),grd.addColorStop(1,"rgba(255, 255, 255, 0.000)"),ctx.fillStyle=grd,ctx.fillRect(0,0,300,300),image.src=canvas.toDataURL()}},{}],6:[function(require,module,exports){"use strict";function componentToHex(c){var hex=c.toString(16);return 1===hex.length?"0"+hex:hex}module.exports=function(h,s,v,hex,separate){var r=void 0,g=void 0,b=void 0,i=void 0,f=void 0,p=void 0,q=void 0,t=void 0;switch(h&&void 0===s&&void 0===v&&(s=h.s,v=h.v,h=h.h),i=Math.floor(6*h),f=6*h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q}return r=Math.floor(255*r),g=Math.floor(255*g),b=Math.floor(255*b),hex?"#"+componentToHex(r)+componentToHex(g)+componentToHex(b):separate?[r,g,b]:"rgb("+r+","+g+","+b+")"}},{}],7:[function(require,module,exports){"use strict";var constrain=require("./constrain"),HSVtoRGB=require("./hsv-to-rgb");module.exports=function(){for(var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ctx=options.ctx,cv=options.cv,bandCount=options.bandCount,rotateAmount=options.rotateAmount,dampen=!1,allRotate=0,variant=0,longestSide=void 0,heightMultiplier=void 0,bars=void 0,offset=void 0,maxDistance=void 0,variants=[[2],[3]],distances=[],i=0;i<bandCount;i++)distances.push(0);var draw=function(spectrum){ctx.save(),ctx.clearRect(0,0,cv.width,cv.height),ctx.translate(cv.width/2,cv.height/2),ctx.rotate(allRotate);for(var _i=0;_i<bandCount;_i++){ctx.rotate(rotateAmount),ctx.lineWidth=1+spectrum[_i]/256*5;var hue=360/bandCount*_i/360,brightness=constrain(1*spectrum[_i]/150,.3,1);ctx.strokeStyle=HSVtoRGB(hue,1,brightness),distances[_i]+=Math.max(50,spectrum[_i])*heightMultiplier/40,distances[_i]%=offset;for(var j=0;j<bars;j++)_arc(distances[_i]+j*offset,.75*rotateAmount)}allRotate+=.002,ctx.restore()},resize=function(){var shortestSide=Math.min(cv.width,cv.height);longestSide=Math.max(cv.width,cv.height),heightMultiplier=1/800*shortestSide,maxDistance=.71*longestSide,offset=maxDistance/bars},vary=function(){variant=(variant+1)%variants.length,bars=variants[variant][0]},_arc=function(distance,angle){ctx.beginPath(),ctx.arc(0,0,distance,0,angle),ctx.stroke(),ctx.closePath()};return vary(),Object.freeze({dampen:dampen,resize:resize,draw:draw,vary:vary})}},{"./constrain":4,"./hsv-to-rgb":6}],8:[function(require,module,exports){"use strict";var colorMap=require("./big-color-map"),constrain=require("./constrain");module.exports=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ctx=options.ctx,cv=options.cv,bandCount=options.bandCount,image=options.image,fftSize=options.fftSize,dampen=!0,width=void 0,height=void 0,tX=void 0,tY=void 0,scale=void 0,bufferImgData=void 0,greyscaled=[],bufferCv=void 0,bufferCtx=void 0,hueOffset=0,draw=function(spectrum){if(bufferImgData){ctx.save(),ctx.clearRect(0,0,cv.width,cv.height),ctx.translate(tX,tY),hueOffset+=1;for(var i=0;i<greyscaled.length;i++){var frequency=greyscaled[i],hue=Math.floor(spectrum[frequency]+hueOffset)%360,brightness=100*Math.sqrt(frequency/spectrum.length*(spectrum[frequency]/fftSize));brightness=constrain(Math.floor(brightness),0,99);var color=colorMap.bigColorMap2[100*hue+brightness];bufferImgData.data[4*i]=color[0],bufferImgData.data[4*i+1]=color[1],bufferImgData.data[4*i+2]=color[2]}bufferCtx.putImageData(bufferImgData,0,0),ctx.scale(scale,scale),ctx.drawImage(bufferCv,0,0),ctx.restore()}},resize=function(){bufferCv.width=width,bufferCv.height=height;var w=cv.parentElement.innerWidth||cv.parentElement.clientWidth,h=cv.parentElement.innerHeight||cv.parentElement.clientHeight,sW=Math.floor(w/width),sH=Math.floor(h/height);scale=Math.min(sW,sH),0===scale&&(scale=1),scale*=window.devicePixelRatio||1,tX=Math.floor((cv.width-width*scale)/2),tY=Math.floor((cv.height-height*scale)/2),ctx.mozImageSmoothingEnabled=!1,ctx.webkitImageSmoothingEnabled=!1,ctx.msImageSmoothingEnabled=!1,ctx.imageSmoothingEnabled=!1},_generateGreyscaleBuckets=function(image){width=image.width,height=image.height,bufferCv=document.createElement("canvas"),bufferCv.width=width,bufferCv.height=height,bufferCtx=bufferCv.getContext("2d"),bufferCtx.clearRect(0,0,width,height),bufferCtx.drawImage(image,0,0,width,height);var imageData=bufferCtx.getImageData(0,0,width,height);bufferImgData=bufferCtx.createImageData(width,height);for(var i=0;i<width*height;i++){var grey=Math.round(.2126*imageData.data[4*i]+.7152*imageData.data[4*i+1]+.0722*imageData.data[4*i+2]);greyscaled.push(Math.round(constrain(grey,0,255)/255*bandCount)),bufferImgData.data[4*i+3]=grey<1?0:255}};if(image){var img=document.createElement("img");img.onload=function(){_generateGreyscaleBuckets(img),resize()},img.src=image}return Object.freeze({dampen:dampen,resize:resize,draw:draw})}},{"./big-color-map":3,"./constrain":4}],9:[function(require,module,exports){"use strict";var colorMap=require("./big-color-map"),constrain=require("./constrain");module.exports=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ctx=options.ctx,cv=options.cv,bandCount=options.bandCount,rotateAmount=options.rotateAmount,dampen=!0,allRotate=0,centerRadius=void 0,heightMultiplier=void 0,gap=void 0,fade=void 0,variant=0,variants=[[!1,!0],[!0,!1],[!1,!1]],vary=function(){variant=(variant+1)%variants.length,gap=variants[variant][0],fade=variants[variant][1]},resize=function(){var shortestSide=Math.min(cv.width,cv.height);centerRadius=.10625*shortestSide,heightMultiplier=1/800*shortestSide},draw=function(spectrum){ctx.clearRect(0,0,cv.width,cv.height),ctx.translate(cv.width/2,cv.height/2),ctx.rotate(allRotate);for(var i=0;i<bandCount;i++){ctx.rotate(rotateAmount);var hue=Math.floor(360/bandCount*i),brightness=99;fade&&(brightness=constrain(Math.floor(spectrum[i]/1.5),25,99)),ctx.fillStyle=colorMap.bigColorMap[100*hue+brightness],ctx.beginPath(),gap?ctx.arc(0,0,centerRadius+Math.max(spectrum[i]*heightMultiplier,2),0,rotateAmount/2):ctx.arc(0,0,centerRadius+Math.max(spectrum[i]*heightMultiplier,2),0,rotateAmount+.005),ctx.lineTo(0,0),ctx.fill(),ctx.closePath()}ctx.fillStyle="#000000",ctx.beginPath(),ctx.arc(0,0,centerRadius,0,2*Math.PI,!1),ctx.fill(),ctx.closePath(),allRotate+=.002,ctx.setTransform(1,0,0,1,0,0)};return vary(),Object.freeze({dampen:dampen,vary:vary,resize:resize,draw:draw})}},{"./big-color-map":3,"./constrain":4}],10:[function(require,module,exports){"use strict";var colorMap=require("./big-color-map"),constrain=require("./constrain");module.exports=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ctx=options.ctx,cv=options.cv,bandCount=options.bandCount,rotateAmount=options.rotateAmount,lastVolumes=options.lastVolumes,bandWidth=void 0,fade=void 0,centerRadius=void 0,heightMultiplier=void 0,dampen=!0,variant=0,variants=[[!1],[!0]],allRotate=0,draw=function(spectrum){ctx.clearRect(0,0,cv.width,cv.height),ctx.translate(cv.width/2,cv.height/2),ctx.rotate(allRotate);for(var i=0;i<bandCount;i++){ctx.rotate(rotateAmount);var hue=Math.floor(360/bandCount*i);if(fade){var brightness=constrain(Math.floor(spectrum[i]/1.5),25,99);ctx.fillStyle=colorMap.bigColorMap[100*hue+brightness],ctx.fillRect(-bandWidth/2,centerRadius,bandWidth,Math.max(2,spectrum[i]*heightMultiplier))}else{var avg=0;avg=(spectrum[i]+lastVolumes[i])/2,ctx.fillStyle=colorMap.bigColorMap[100*hue+50],ctx.fillRect(-bandWidth/2,centerRadius+avg,bandWidth,2),ctx.fillStyle=colorMap.bigColorMap[100*hue+99],ctx.fillRect(-bandWidth/2,centerRadius,bandWidth,spectrum[i]*heightMultiplier)}}allRotate+=.002,ctx.setTransform(1,0,0,1,0,0)},vary=function(){variant=(variant+1)%variants.length,fade=variants[variant][0]},resize=function(){var shortestSide=Math.min(cv.width,cv.height);centerRadius=.10625*shortestSide,heightMultiplier=1/800*shortestSide,bandWidth=2*Math.PI*centerRadius/bandCount};return vary(),Object.freeze({dampen:dampen,vary:vary,resize:resize,draw:draw})}},{"./big-color-map":3,"./constrain":4}],11:[function(require,module,exports){"use strict";var colorMap=require("./big-color-map"),constrain=require("./constrain");module.exports=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ctx=options.ctx,cv=options.cv,bandCount=options.bandCount,rotateAmount=options.rotateAmount,dampen=!0,centerRadius=void 0,hypotenuse=void 0,shortestSide=void 0,hueOffset=0,draw=function(spectrum){hueOffset+=1,ctx.clearRect(0,0,cv.width,cv.height),ctx.translate(cv.width/2,cv.height/2),ctx.rotate(Math.PI/2);for(var i=0;i<bandCount;i++){var hue=Math.floor(360/bandCount*i+hueOffset)%360,brightness=constrain(Math.floor(spectrum[i]/1.5),15,99);ctx.fillStyle=colorMap.bigColorMap[100*hue+brightness];var inner=shortestSide/2;inner-=(inner-centerRadius)*(spectrum[i]/255),ctx.beginPath(),ctx.arc(0,0,hypotenuse/2,-rotateAmount/2,rotateAmount/2),ctx.lineTo(inner,0),ctx.fill(),ctx.closePath(),ctx.rotate(rotateAmount)}ctx.setTransform(1,0,0,1,0,0)},resize=function(){shortestSide=Math.min(cv.width,cv.height),hypotenuse=Math.sqrt(cv.width*cv.width+cv.height*cv.height),centerRadius=.10625*shortestSide};return Object.freeze({dampen:dampen,resize:resize,draw:draw})}},{"./big-color-map":3,"./constrain":4}],12:[function(require,module,exports){"use strict";function Particle(){this.cx=-200,this.cy=-200,this.regenerate()}var colorMap=require("./big-color-map"),constrain=require("./constrain"),texture=require("./create-gradient-texture");Particle.prototype.regenerate=function(){var angle=2*Math.random()*Math.PI;this.x=Math.cos(angle)*Math.random()*500+this.cx,this.y=Math.sin(angle)*Math.random()*500+this.cy,angle=2*Math.random()*Math.PI,this.dx=Math.cos(angle),this.dy=Math.sin(angle),this.intensity=0,this.di=.01+Math.random()/50},Particle.prototype.move=function(){this.x+=this.dx*Math.random()*4,this.y+=this.dy*Math.random()*4,this.intensity+=this.di,this.intensity<0?this.regenerate():this.intensity>1&&(this.intensity=1,this.di*=-1)},module.exports=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ctx=options.ctx,cv=options.cv,bandCount=options.bandCount,rotateAmount=options.rotateAmount,dampen=!0,variant=0,variants=[!0,!1],allRotate=0,clouds=void 0,longestSide=void 0,particleImage=document.createElement("img");texture(particleImage);for(var particles=[],i=0;i<25;i++)particles.push(new Particle);var draw=function(spectrum){if(ctx.save(),ctx.fillStyle="#000000",ctx.fillRect(0,0,cv.width,cv.height),ctx.translate(cv.width/2,cv.height/2),clouds){ctx.globalCompositeOperation="screen";for(var _i=0;_i<particles.length;_i++)ctx.globalAlpha=particles[_i].intensity,ctx.drawImage(particleImage,particles[_i].x,particles[_i].y),particles[_i].move()}ctx.rotate(allRotate),clouds&&(ctx.globalCompositeOperation="multiply",ctx.globalAlpha=1);for(var _i2=0;_i2<bandCount;_i2++){ctx.rotate(rotateAmount);var hue=Math.floor(360/bandCount*_i2)%360,brightness=constrain(Math.floor(spectrum[_i2]/2),10,99);ctx.fillStyle=colorMap.bigColorMap[100*hue+brightness],ctx.beginPath(),ctx.arc(0,0,1.5*longestSide,0,rotateAmount+.1),ctx.lineTo(0,0),ctx.fill(),ctx.closePath()}allRotate+=.002,ctx.restore()},resize=function(){longestSide=Math.max(cv.width,cv.height)},vary=function(){variant=(variant+1)%variants.length,clouds=variants[variant]};return vary(),Object.freeze({dampen:dampen,vary:vary,resize:resize,draw:draw})}},{"./big-color-map":3,"./constrain":4,"./create-gradient-texture":5}],13:[function(require,module,exports){!function(root){"use strict";function NotSupportedError(){this.name="NotSupportedError",this.message="getUserMedia is not implemented in this browser"}function FakePromise(){this.then=function(){return this};var err=new NotSupportedError;this.catch=function(cb){setTimeout(function(){cb(err)})}}function getUserMedia(constraints){return isPromiseSupported?gump?navigator.mediaDevices.getUserMedia(constraints):new Promise(function(resolve,reject){return gum?void gum.call(navigator,constraints,resolve,reject):reject(new NotSupportedError)}):new FakePromise}NotSupportedError.prototype=Error.prototype;var isPromiseSupported="undefined"!=typeof Promise,navigatorExists="undefined"!=typeof navigator,gump=navigatorExists&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,gum=navigatorExists&&(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);getUserMedia.NotSupportedError=NotSupportedError,getUserMedia.isSupported=!(!isPromiseSupported||!gump&&!gum),"function"==typeof define&&define.amd?define([],function(){return getUserMedia}):"object"==typeof module&&module.exports?module.exports=getUserMedia:(root.navigator=root.navigator||{},root.nagivator.mediaDevices=root.navigator.mediaDevices||{},root.nagivator.mediaDevices.getUserMedia=root.nagivator.mediaDevices.getUserMedia||getUserMedia)}(this)},{}],14:[function(require,module,exports){(function(process){(function(){var getNanoSeconds,hrtime,loadTime;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(module.exports=function(){return(getNanoSeconds()-loadTime)/1e6},hrtime=process.hrtime,getNanoSeconds=function(){var hr;return hr=hrtime(),1e9*hr[0]+hr[1]},loadTime=getNanoSeconds()):Date.now?(module.exports=function(){return Date.now()-loadTime},loadTime=Date.now()):(module.exports=function(){return(new Date).getTime()-loadTime},loadTime=(new Date).getTime())}).call(this)}).call(this,require("_process"))},{_process:15}],15:[function(require,module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],16:[function(require,module,exports){(function(global){for(var now=require("performance-now"),root="undefined"==typeof window?global:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix],i=0;!raf&&i<vendors.length;i++)raf=root[vendors[i]+"Request"+suffix],caf=root[vendors[i]+"Cancel"+suffix]||root[vendors[i]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(callback){if(0===queue.length){var _now=now(),next=Math.max(0,frameDuration-(_now-last));last=next+_now,setTimeout(function(){var cp=queue.slice(0);queue.length=0;for(var i=0;i<cp.length;i++)if(!cp[i].cancelled)try{cp[i].callback(last)}catch(e){setTimeout(function(){throw e},0)}},Math.round(next))}return queue.push({handle:++id,callback:callback,cancelled:!1}),id},caf=function(handle){for(var i=0;i<queue.length;i++)queue[i].handle===handle&&(queue[i].cancelled=!0)}}module.exports=function(fn){return raf.call(root,fn)},module.exports.cancel=function(){caf.apply(root,arguments)},module.exports.polyfill=function(){root.requestAnimationFrame=raf,root.cancelAnimationFrame=caf}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":14}]},{},[1])(1)});
